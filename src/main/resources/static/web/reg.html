<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!--edge浏览器H5兼容设置-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--360浏览器H5兼容设置-->
    <meta name="renderer" content="webkit" />
    <title>注册页面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--导入核心文件-->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <script src="../bootstrap3/js/bootstrap.js"></script>
</head>
<body>
<div id="user_reg">用户注册</div>
<form id="form-reg" method="post" name="form">
    <table>
        <tr>
            账号：<input type="text" id="username" name="username" placeholder="请输入用户名"/></td>
        </tr>
        <tr>
            密码：<input type="password" id="password" name="password" placeholder="请输入密码"/></td>
        </tr>
        <tr>
            <input type="submit" id="btn-reg" value="注册"/>
        </tr>
    </table>
</form>
</body>
<script type="text/javascript">
    //1.监听注册按钮是否被点击
    $("#btn-reg").click(function () {
        //2.发送Ajax()的异步请求来完成用户的注册功能
        console.log($("#form-reg").serialize())
        $.ajax({
            url:"/users/reg",
            type:"POST",
            //username=tom & password=123
            data:$("#form-reg").serialize(),
            dataType:"JSON",
            success:function (json){
                if (json.state == 200) {
                    alert("注册成功！");
                    location.href = "uLogin.html";
                } else {
                    alert("注册失败！" + json.message);
                }
            },
            error:function (xhr) {
                alert("注册时产生未知的错误！"+xhr.status)
            }
        });
    });

</script>
</html>